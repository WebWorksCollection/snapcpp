#!/bin/sh

# Full clean up
rm -rf BUILD /tmp/SnapFindDeps.pl.hash

mkdir BUILD
cd BUILD

# You may change the compiler with something like this:
# (The CMAKE_C_COMPILER and CMAKE_CXX_COMPILER will NOT work)
#export CC=gcc-4.9
#export CXX=g++-4.9 cmake

#TYPE=Release
TYPE=Debug

#PROCESSORS=1
PROCESSORS=4

# Configure and generate (Debug or Release)
cmake \
	-DCMAKE_BUILD_TYPE=$TYPE \
	-DMAKEFLAGS=-j$PROCESSORS \
	-DDTD_SOURCE_PATH:PATH="`pwd`/BUILD/dist/share/snapwebsites/dtd" \
	-DXSD_SOURCE_PATH:PATH="`pwd`/BUILD/dist/share/snapwebsites/xsd" \
	../snapcpp

make
